{% extends 'base.html' %}

{% block content %}
<div class="row mb-4 align-items-center">
    <div class="col-md-8">
        <h2 class="fw-bold text-dark"><i class="bi bi-people-fill text-primary"></i> Membros</h2>
        <p class="text-muted mb-0">Gerencie o cadastro da igreja</p>
    </div>
    <div class="col-md-4 text-end">
        <a href="{% url 'cadastrar_membro' %}" class="btn btn-modern-success shadow-sm">
            <i class="bi bi-person-plus-fill"></i> Novo Membro
        </a>
    </div>
</div>

<div class="card card-modern shadow-sm border-0">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="bg-light">
                    <tr>
                        <th class="ps-4 py-3">Nome / Ficha</th>
                        <th>Cargo</th>
                        <th>Congregação</th>
                        <th>Telefone</th>
                        <th class="text-end pe-4">Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for membro in membros %}
                    <tr>
                        <td class="ps-4 py-3">
                            <div class="d-flex align-items-center">
                                {% if membro.foto %}
                                    <img src="{{ membro.foto.url }}" class="rounded-circle me-3 border" width="45" height="45" style="object-fit: cover;">
                                {% else %}
                                    <div class="rounded-circle me-3 d-flex justify-content-center align-items-center bg-secondary-subtle text-secondary" style="width: 45px; height: 45px;">
                                        <i class="bi bi-person-fill fs-5"></i>
                                    </div>
                                {% endif %}
                                
                                <div>
                                    <div class="fw-bold text-dark">{{ membro.nome_completo }}</div>
                                    <div class="small text-muted">Ficha: {{ membro.numero_ficha }}</div>
                                </div>
                            </div>
                        </td>

                        <td>{{ membro.cargo }}</td>
                        
                        <td><span class="badge bg-light text-dark border">{{ membro.congregacao }}</span></td>

                        <td>{{ membro.telefone|default:"-" }}</td>

                        <td class="text-end pe-4">
                            <a href="#" class="btn btn-sm btn-outline-primary border-0" title="Editar">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center py-5">
                            <div class="text-muted">
                                <i class="bi bi-inbox fs-1 d-block mb-3"></i>
                                <p>Nenhum membro cadastrado ainda.</p>
                                <a href="{% url 'cadastrar_membro' %}" class="btn btn-sm btn-primary">Cadastrar o Primeiro</a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}